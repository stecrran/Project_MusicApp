{"failedCount":0,"prefixedPath":"classpath:features\/manageUsers.feature","packageQualifiedName":"features.manageUsers","loopIndex":-1,"relativePath":"features\/manageUsers.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1163100,"millis":1.1631,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"},"stepLog":"22:00:06.638 << lock released, cached callSingle: classpath:features\/login.feature\n","callResults":[{"prefixedPath":"classpath:features\/login.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-03-18 10:00:07 p.m.","durationMillis":688.3821,"callArg":{"baseUrl":"http:\/\/localhost:9091\/api","username":"Admin","password":"Admin"},"failedCount":0,"packageQualifiedName":"features.login","relativePath":"features\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":13453300,"millis":13.4533,"status":"passed"},"step":{"comments":["# The parameters 'baseUrl', 'username' and 'password' are passed in from karate-config.js"],"line":5,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"},"stepLog":"22:00:05.886 >> lock acquired, begin callSingle: classpath:features\/login.feature\n"},{"result":{"nanos":62773100,"millis":62.7731,"status":"passed"},"step":{"line":6,"prefix":"And","index":1,"text":"request { username: \"Admin\", password: \"Admin\" }"}},{"result":{"nanos":606185400,"millis":606.1854,"status":"passed"},"step":{"line":7,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:00:06.439 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:00:06.627 response time in milliseconds: 184\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNiwiaWF0IjoxNzQyMzM1MjA2fQ.IktmFWmK_K0hw2o_Ab1xgs1ADYBTXPa03bokaGejVdzQYM7dw1xKdCisvUc17jOgRWZelCVduqgUdGmoYyxWDQ\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":31400,"millis":0.0314,"status":"passed"},"step":{"line":8,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":5938900,"millis":5.9389,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def jwt = response.jwt"}}],"executorName":"main","line":3,"name":"Authenticate and get JWT token","description":"","durationMillis":688.3821,"startTime":1742335205933,"failed":false,"refId":"[1:3]","endTime":1742335206637,"exampleIndex":-1}],"name":"User Login","passedCount":1}]},{"result":{"nanos":15216600,"millis":15.2166,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":835300,"millis":0.8353,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":682700,"millis":0.6827,"status":"passed"},"step":{"comments":["# Login as admin to perform user management"],"line":11,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":314500,"millis":0.3145,"status":"passed"},"step":{"line":12,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":138652600,"millis":138.6526,"status":"passed"},"step":{"line":13,"prefix":"When","index":2,"text":"method POST"},"stepLog":"22:00:06.661 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:00:06.797 response time in milliseconds: 135\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNiwiaWF0IjoxNzQyMzM1MjA2fQ.IktmFWmK_K0hw2o_Ab1xgs1ADYBTXPa03bokaGejVdzQYM7dw1xKdCisvUc17jOgRWZelCVduqgUdGmoYyxWDQ\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":9300,"millis":0.0093,"status":"passed"},"step":{"line":14,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":622000,"millis":0.622,"status":"passed"},"step":{"line":15,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":1169700,"millis":1.1697,"status":"passed"},"step":{"comments":["# Create a new user"],"line":18,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/register'"}},{"result":{"nanos":1038100,"millis":1.0381,"status":"passed"},"step":{"line":19,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":2449800,"millis":2.4498,"status":"passed"},"step":{"line":20,"prefix":"And","index":7,"text":"request { username: #(randomUsername), password: #(password), roles: ['ADMIN'] }"}},{"result":{"nanos":137376400,"millis":137.3764,"status":"passed"},"step":{"line":21,"prefix":"When","index":8,"text":"method POST"},"stepLog":"22:00:06.806 request:\n2 > POST http:\/\/localhost:9091\/api\/admin\/register\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNiwiaWF0IjoxNzQyMzM1MjA2fQ.IktmFWmK_K0hw2o_Ab1xgs1ADYBTXPa03bokaGejVdzQYM7dw1xKdCisvUc17jOgRWZelCVduqgUdGmoYyxWDQ\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 88\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11742335206650\",\"password\":\"Password123\",\"roles\":[\"ADMIN\"]}\n\n22:00:06.940 response time in milliseconds: 133\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n{\"id\":135,\"username\":\"testuser-karate-11742335206650\",\"password\":\"$2a$10$LfL.kcuXnScfbOYQVPp0ZOQF70lsi98ExqAlWEAgh.1A2NiFIYCpW\",\"roles\":[\"ADMIN\"],\"musicCollection\":[]}\n\n"},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":22,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":16133900,"millis":16.1339,"status":"passed"},"step":{"line":23,"prefix":"And","index":10,"text":"match response.id == '#present'"}},{"result":{"nanos":1430500,"millis":1.4305,"status":"passed"},"step":{"line":24,"prefix":"*","index":11,"text":"def userId = response.id"}},{"result":{"nanos":439900,"millis":0.4399,"status":"passed"},"step":{"comments":["# Login as the created user to verify login works"],"line":27,"prefix":"Given","index":12,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":903800,"millis":0.9038,"status":"passed"},"step":{"line":28,"prefix":"And","index":13,"text":"request { username: #(randomUsername), password: #(password) }"}},{"result":{"nanos":125753600,"millis":125.7536,"status":"passed"},"step":{"line":29,"prefix":"When","index":14,"text":"method POST"},"stepLog":"22:00:06.962 request:\n3 > POST http:\/\/localhost:9091\/api\/auth\/login\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 70\n3 > Host: localhost:9091\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n3 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11742335206650\",\"password\":\"Password123\"}\n\n22:00:07.085 response time in milliseconds: 123\n3 < 200\n3 < X-Content-Type-Options: nosniff\n3 < X-XSS-Protection: 1; mode=block\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Pragma: no-cache\n3 < Expires: 0\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n3 < Keep-Alive: timeout=60\n3 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0dXNlci1rYXJhdGUtMTE3NDIzMzUyMDY2NTAiLCJyb2xlcyI6WyJBRE1JTiJdLCJleHAiOjE3NDIzMzg4MDcsImlhdCI6MTc0MjMzNTIwN30.1c8SBN0H1Za9lz_vQp6y0OVag2x94CVpPnzGPyMKsNNxjjo7s6ywbZ0VnNa35f2dJUeoDYr08rwC201MbaiaCA\",\"username\":\"testuser-karate-11742335206650\",\"roles\":[\"ADMIN\"]}\n\n"},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":30,"prefix":"Then","index":15,"text":"status 200"}},{"result":{"nanos":561700,"millis":0.5617,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"def userToken = response.jwt"}},{"result":{"nanos":1124400,"millis":1.1244,"status":"passed"},"step":{"comments":["# Delete the user"],"line":34,"prefix":"Given","index":17,"text":"url baseUrl + '\/admin\/users\/' + userId"}},{"result":{"nanos":288600,"millis":0.2886,"status":"passed"},"step":{"line":35,"prefix":"And","index":18,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":63035900,"millis":63.0359,"status":"passed"},"step":{"line":36,"prefix":"When","index":19,"text":"method DELETE"},"stepLog":"22:00:07.090 request:\n4 > DELETE http:\/\/localhost:9091\/api\/admin\/users\/135\n4 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNiwiaWF0IjoxNzQyMzM1MjA2fQ.IktmFWmK_K0hw2o_Ab1xgs1ADYBTXPa03bokaGejVdzQYM7dw1xKdCisvUc17jOgRWZelCVduqgUdGmoYyxWDQ\n4 > Host: localhost:9091\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n4 > Accept-Encoding: gzip,deflate\n\n\n22:00:07.151 response time in milliseconds: 60\n4 < 204\n4 < X-Content-Type-Options: nosniff\n4 < X-XSS-Protection: 1; mode=block\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Pragma: no-cache\n4 < Expires: 0\n4 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n4 < Keep-Alive: timeout=60\n4 < Connection: keep-alive\n\n\n"},{"result":{"nanos":9700,"millis":0.0097,"status":"passed"},"step":{"line":37,"prefix":"Then","index":20,"text":"status 204"}}],"executorName":"main","line":8,"name":"Create, Update, and Delete User","description":"","durationMillis":509.2337,"startTime":1742335205643,"failed":false,"refId":"[1:8]","endTime":1742335207152,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":714500,"millis":0.7145,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":2049600,"millis":2.0496,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":384900,"millis":0.3849,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":196100,"millis":0.1961,"status":"passed"},"step":{"comments":["# Login as admin"],"line":41,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":215900,"millis":0.2159,"status":"passed"},"step":{"line":42,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":120589500,"millis":120.5895,"status":"passed"},"step":{"line":43,"prefix":"When","index":2,"text":"method POST"},"stepLog":"22:00:07.172 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:00:07.290 response time in milliseconds: 117\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNywiaWF0IjoxNzQyMzM1MjA3fQ.-EcHF5NIgqJ7Dxxr1xn7Wrs5Ev37sVNDptuLUqTEraIh6W1S996Z-VhA6ctpG696A-5nYUxtbLdszpGseUfZHg\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":9500,"millis":0.0095,"status":"passed"},"step":{"line":44,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":524600,"millis":0.5246,"status":"passed"},"step":{"line":45,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":713800,"millis":0.7138,"status":"passed"},"step":{"comments":["# Fetch all users"],"line":48,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/users'"}},{"result":{"nanos":289300,"millis":0.2893,"status":"passed"},"step":{"line":49,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":52782100,"millis":52.7821,"status":"passed"},"step":{"line":50,"prefix":"When","index":7,"text":"method GET"},"stepLog":"22:00:07.295 request:\n2 > GET http:\/\/localhost:9091\/api\/admin\/users\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjMzODgwNywiaWF0IjoxNzQyMzM1MjA3fQ.-EcHF5NIgqJ7Dxxr1xn7Wrs5Ev37sVNDptuLUqTEraIh6W1S996Z-VhA6ctpG696A-5nYUxtbLdszpGseUfZHg\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n\n\n22:00:07.343 response time in milliseconds: 47\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Tue, 18 Mar 2025 22:00:06 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n[{\"id\":26,\"username\":\"Admin\",\"password\":\"$2a$10$97aBtw\/vGidN9XDWiJWcI.6EfnqPuFCvvSrelI3nDgrSjJU8wVVpK\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"],\"musicCollection\":[]},{\"id\":50,\"username\":\"spotify_user\",\"password\":\"$2a$10$593Ak9PDt.x6woUvsm3kK.P\/PNb3PslHP9UODY3UuTdTGWt2L\/23K\",\"roles\":[\"SPOTIFY_USER\"],\"musicCollection\":[]},{\"id\":132,\"username\":\"test4\",\"password\":\"$2a$10$pgGslR091Kd4GXa.lIElIOnQYcqqxQmwcgxQ8sRB5eO3nG3jfd1.G\",\"roles\":[\"ADMIN\"],\"musicCollection\":[]},{\"id\":133,\"username\":\"test5\",\"password\":\"$2a$10$pOk\/hxppNs64lHbWi3QLeebpgv9dPKAxp733FD7yg9m9tM6b85ZVy\",\"roles\":[\"SPOTIFY_USER\"],\"musicCollection\":[]},{\"id\":134,\"username\":\"testuser-karate-11742335163911\",\"password\":\"$2a$10$Qy5MQje3Paf01pF96lef4OewGoFbDzLGTm2sHBRGUgNqdvoafdwTy\",\"roles\":[\"ADMIN\"],\"musicCollection\":[]}]\n\n"},{"result":{"nanos":10400,"millis":0.0104,"status":"passed"},"step":{"line":51,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":6537200,"millis":6.5372,"status":"passed"},"step":{"line":52,"prefix":"And","index":9,"text":"assert response.length > 0"}}],"executorName":"main","line":39,"name":"Get All Users","description":"","durationMillis":185.0174,"startTime":1742335207163,"failed":false,"refId":"[2:39]","endTime":1742335207352,"exampleIndex":-1}],"callDepth":0,"name":"Create, Update, Delete, and Get Users","description":"","resultDate":"2025-03-18 10:00:07 p.m.","durationMillis":694.2511,"passedCount":2}