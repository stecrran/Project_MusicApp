{"failedCount":0,"prefixedPath":"classpath:features\/manageUsers.feature","packageQualifiedName":"features.manageUsers","loopIndex":-1,"relativePath":"features\/manageUsers.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1317300,"millis":1.3173,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"},"stepLog":"22:22:20.592 << lock released, cached callSingle: classpath:features\/login.feature\n","callResults":[{"prefixedPath":"classpath:features\/login.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-03-28 10:22:21 p.m.","durationMillis":156.7956,"callArg":{"baseUrl":"http:\/\/localhost:9091\/api","username":"Admin","password":"Admin"},"failedCount":0,"packageQualifiedName":"features.login","relativePath":"features\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":1624800,"millis":1.6248,"status":"passed"},"step":{"comments":["# The parameters 'baseUrl', 'username' and 'password' are passed in from karate-config.js"],"line":5,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"},"stepLog":"22:22:20.425 >> lock acquired, begin callSingle: classpath:features\/login.feature\n"},{"result":{"nanos":459300,"millis":0.4593,"status":"passed"},"step":{"line":6,"prefix":"And","index":1,"text":"request { username: \"Admin\", password: \"Admin\" }"}},{"result":{"nanos":153653000,"millis":153.653,"status":"passed"},"step":{"line":7,"prefix":"When","index":2,"text":"method post"},"stepLog":"22:22:20.438 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:22:20.588 response time in milliseconds: 149\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MCwiaWF0IjoxNzQzMjAwNTQwfQ.tli3-aHmdvu2MEM_pyQHewu1hhQ74YKrJaw2MQEbK-VtVxdiMn6pnUdgQA_lKKAyfxC0w3Sa616n_DAY2RaHeA\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":13800,"millis":0.0138,"status":"passed"},"step":{"line":8,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":1044700,"millis":1.0447,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def jwt = response.jwt"}}],"executorName":"main","line":3,"name":"Authenticate and get JWT token","description":"","durationMillis":156.7956,"startTime":1743200540434,"failed":false,"refId":"[1:3]","endTime":1743200540591,"exampleIndex":-1}],"name":"User Login","passedCount":1}]},{"result":{"nanos":15713700,"millis":15.7137,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":764400,"millis":0.7644,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":254000,"millis":0.254,"status":"passed"},"step":{"comments":["# Login as admin to perform user management"],"line":11,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":257600,"millis":0.2576,"status":"passed"},"step":{"line":12,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":140727300,"millis":140.7273,"status":"passed"},"step":{"line":13,"prefix":"When","index":2,"text":"method POST"},"stepLog":"22:22:20.613 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:22:20.751 response time in milliseconds: 137\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MCwiaWF0IjoxNzQzMjAwNTQwfQ.tli3-aHmdvu2MEM_pyQHewu1hhQ74YKrJaw2MQEbK-VtVxdiMn6pnUdgQA_lKKAyfxC0w3Sa616n_DAY2RaHeA\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":16100,"millis":0.0161,"status":"passed"},"step":{"line":14,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":550800,"millis":0.5508,"status":"passed"},"step":{"line":15,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":1099400,"millis":1.0994,"status":"passed"},"step":{"comments":["# Create a new user"],"line":18,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/register'"}},{"result":{"nanos":869000,"millis":0.869,"status":"passed"},"step":{"line":19,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":2461100,"millis":2.4611,"status":"passed"},"step":{"line":20,"prefix":"And","index":7,"text":"request { username: #(randomUsername), password: #(password), roles: ['ADMIN'] }"}},{"result":{"nanos":146479900,"millis":146.4799,"status":"passed"},"step":{"line":21,"prefix":"When","index":8,"text":"method POST"},"stepLog":"22:22:20.760 request:\n2 > POST http:\/\/localhost:9091\/api\/admin\/register\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MCwiaWF0IjoxNzQzMjAwNTQwfQ.tli3-aHmdvu2MEM_pyQHewu1hhQ74YKrJaw2MQEbK-VtVxdiMn6pnUdgQA_lKKAyfxC0w3Sa616n_DAY2RaHeA\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 88\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11743200540606\",\"password\":\"Password123\",\"roles\":[\"ADMIN\"]}\n\n22:22:20.903 response time in milliseconds: 143\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n{\"id\":328,\"username\":\"testuser-karate-11743200540606\",\"password\":\"$2a$10$vKd2.1i1IZh6xFt9NmwXH.WblvJtJgjYvM6\/8ZvapQxhhQ2gwV2YC\",\"roles\":[\"ADMIN\"],\"musicCollection\":[]}\n\n"},{"result":{"nanos":13900,"millis":0.0139,"status":"passed"},"step":{"line":22,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":18054500,"millis":18.0545,"status":"passed"},"step":{"line":23,"prefix":"And","index":10,"text":"match response.id == '#present'"}},{"result":{"nanos":930400,"millis":0.9304,"status":"passed"},"step":{"line":24,"prefix":"*","index":11,"text":"def userId = response.id"}},{"result":{"nanos":252300,"millis":0.2523,"status":"passed"},"step":{"comments":["# Login as the created user to verify login works"],"line":27,"prefix":"Given","index":12,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":2128600,"millis":2.1286,"status":"passed"},"step":{"line":28,"prefix":"And","index":13,"text":"request { username: #(randomUsername), password: #(password) }"}},{"result":{"nanos":137702900,"millis":137.7029,"status":"passed"},"step":{"line":29,"prefix":"When","index":14,"text":"method POST"},"stepLog":"22:22:20.928 request:\n3 > POST http:\/\/localhost:9091\/api\/auth\/login\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 70\n3 > Host: localhost:9091\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n3 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11743200540606\",\"password\":\"Password123\"}\n\n22:22:21.063 response time in milliseconds: 135\n3 < 200\n3 < X-Content-Type-Options: nosniff\n3 < X-XSS-Protection: 1; mode=block\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Pragma: no-cache\n3 < Expires: 0\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n3 < Keep-Alive: timeout=60\n3 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0dXNlci1rYXJhdGUtMTE3NDMyMDA1NDA2MDYiLCJyb2xlcyI6WyJBRE1JTiJdLCJleHAiOjE3NDMyMDQxNDEsImlhdCI6MTc0MzIwMDU0MX0.uxcoYid249y7dXrltRlTKrjCTbn2IG-biFAb0v6jLQlW1uKszvXKa6UN27SlobRLtEgnqoIx9ftc3KB7dACyjg\",\"username\":\"testuser-karate-11743200540606\",\"roles\":[\"ADMIN\"]}\n\n"},{"result":{"nanos":15000,"millis":0.015,"status":"passed"},"step":{"line":30,"prefix":"Then","index":15,"text":"status 200"}},{"result":{"nanos":550200,"millis":0.5502,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"def userToken = response.jwt"}},{"result":{"nanos":1307800,"millis":1.3078,"status":"passed"},"step":{"comments":["# Delete the user"],"line":34,"prefix":"Given","index":17,"text":"url baseUrl + '\/admin\/users\/' + userId"}},{"result":{"nanos":307400,"millis":0.3074,"status":"passed"},"step":{"line":35,"prefix":"And","index":18,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":70454400,"millis":70.4544,"status":"passed"},"step":{"line":36,"prefix":"When","index":19,"text":"method DELETE"},"stepLog":"22:22:21.068 request:\n4 > DELETE http:\/\/localhost:9091\/api\/admin\/users\/328\n4 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MCwiaWF0IjoxNzQzMjAwNTQwfQ.tli3-aHmdvu2MEM_pyQHewu1hhQ74YKrJaw2MQEbK-VtVxdiMn6pnUdgQA_lKKAyfxC0w3Sa616n_DAY2RaHeA\n4 > Host: localhost:9091\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n4 > Accept-Encoding: gzip,deflate\n\n\n22:22:21.136 response time in milliseconds: 68\n4 < 204\n4 < X-Content-Type-Options: nosniff\n4 < X-XSS-Protection: 1; mode=block\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Pragma: no-cache\n4 < Expires: 0\n4 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n4 < Keep-Alive: timeout=60\n4 < Connection: keep-alive\n\n\n"},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":37,"prefix":"Then","index":20,"text":"status 204"}}],"executorName":"main","line":8,"name":"Create, Update, and Delete User","description":"","durationMillis":542.2388,"startTime":1743200540423,"failed":false,"refId":"[1:8]","endTime":1743200541137,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":532300,"millis":0.5323,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":3414300,"millis":3.4143,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":349100,"millis":0.3491,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":210400,"millis":0.2104,"status":"passed"},"step":{"comments":["# Login as admin"],"line":41,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":294500,"millis":0.2945,"status":"passed"},"step":{"line":42,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":137639400,"millis":137.6394,"status":"passed"},"step":{"line":43,"prefix":"When","index":2,"text":"method POST"},"stepLog":"22:22:21.157 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n22:22:21.291 response time in milliseconds: 134\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MSwiaWF0IjoxNzQzMjAwNTQxfQ.AJr4Z0ZjJyt-7d7tzefGh2jcTSqJvWSyVxIHzIH2ozcmPDOVChICni_6CKNuZCwuI9HXEGAhlgZ1nX2_BkM_JA\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":44,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":472000,"millis":0.472,"status":"passed"},"step":{"line":45,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":806300,"millis":0.8063,"status":"passed"},"step":{"comments":["# Fetch all users"],"line":48,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/users'"}},{"result":{"nanos":277800,"millis":0.2778,"status":"passed"},"step":{"line":49,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":44601000,"millis":44.601,"status":"passed"},"step":{"line":50,"prefix":"When","index":7,"text":"method GET"},"stepLog":"22:22:21.296 request:\n2 > GET http:\/\/localhost:9091\/api\/admin\/users\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MzIwNDE0MSwiaWF0IjoxNzQzMjAwNTQxfQ.AJr4Z0ZjJyt-7d7tzefGh2jcTSqJvWSyVxIHzIH2ozcmPDOVChICni_6CKNuZCwuI9HXEGAhlgZ1nX2_BkM_JA\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n\n\n22:22:21.338 response time in milliseconds: 41\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Fri, 28 Mar 2025 22:22:20 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n[{\"id\":142,\"username\":\"Admin\",\"password\":\"$2a$10$t8VVB81VwN4KZLyRri8A2.nFf4gKyQ7cWeBfRiSpcW0fEqfljElQW\",\"roles\":[\"SPOTIFY_USER\",\"ADMIN\"],\"musicCollection\":[]},{\"id\":143,\"username\":\"spotify_user\",\"password\":\"$2a$10$3E1jM3f5NUj5zn\/NVfb2COOGlDjQZ4ormZHcrRxEyLWII6QTnmP5K\",\"roles\":[\"SPOTIFY_USER\"],\"musicCollection\":[]}]\n\n"},{"result":{"nanos":14400,"millis":0.0144,"status":"passed"},"step":{"line":51,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":1067800,"millis":1.0678,"status":"passed"},"step":{"line":52,"prefix":"And","index":9,"text":"assert response.length > 0"}}],"executorName":"main","line":39,"name":"Get All Users","description":"","durationMillis":189.6921,"startTime":1743200541148,"failed":false,"refId":"[2:39]","endTime":1743200541340,"exampleIndex":-1}],"callDepth":0,"name":"Create, Update, Delete, and Get Users","description":"","resultDate":"2025-03-28 10:22:21 p.m.","durationMillis":731.9309,"passedCount":2}