{"failedCount":0,"prefixedPath":"classpath:features\/manageUsers.feature","packageQualifiedName":"features.manageUsers","loopIndex":-1,"relativePath":"features\/manageUsers.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":888100,"millis":0.8881,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"},"stepLog":"01:13:35.364 << lock released, cached callSingle: classpath:features\/login.feature\n","callResults":[{"prefixedPath":"classpath:features\/login.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-03-25 01:13:36 a.m.","durationMillis":200.0275,"callArg":{"baseUrl":"http:\/\/localhost:9091\/api","username":"Admin","password":"Admin"},"failedCount":0,"packageQualifiedName":"features.login","relativePath":"features\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":2795400,"millis":2.7954,"status":"passed"},"step":{"comments":["# The parameters 'baseUrl', 'username' and 'password' are passed in from karate-config.js"],"line":5,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"},"stepLog":"01:13:35.154 >> lock acquired, begin callSingle: classpath:features\/login.feature\n"},{"result":{"nanos":1644700,"millis":1.6447,"status":"passed"},"step":{"line":6,"prefix":"And","index":1,"text":"request { username: \"Admin\", password: \"Admin\" }"}},{"result":{"nanos":194686900,"millis":194.6869,"status":"passed"},"step":{"line":7,"prefix":"When","index":2,"text":"method post"},"stepLog":"01:13:35.174 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n01:13:35.362 response time in milliseconds: 187\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNSwiaWF0IjoxNzQyODY1MjE1fQ.uFjth-A9Hktj_JLk1oJrfALeNMdlb0n-jVqgRnAHuahgL54E-EXqabBHXc2S-1Ovodj2HGh1LYrtqSi8vI-Cqw\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":11900,"millis":0.0119,"status":"passed"},"step":{"line":8,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":888600,"millis":0.8886,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def jwt = response.jwt"}}],"executorName":"main","line":3,"name":"Authenticate and get JWT token","description":"","durationMillis":200.0275,"startTime":1742865215164,"failed":false,"refId":"[1:3]","endTime":1742865215364,"exampleIndex":-1}],"name":"User Login","passedCount":1}]},{"result":{"nanos":15139300,"millis":15.1393,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":659400,"millis":0.6594,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":210800,"millis":0.2108,"status":"passed"},"step":{"comments":["# Login as admin to perform user management"],"line":11,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":265400,"millis":0.2654,"status":"passed"},"step":{"line":12,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":156730400,"millis":156.7304,"status":"passed"},"step":{"line":13,"prefix":"When","index":2,"text":"method POST"},"stepLog":"01:13:35.384 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n01:13:35.538 response time in milliseconds: 153\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNSwiaWF0IjoxNzQyODY1MjE1fQ.uFjth-A9Hktj_JLk1oJrfALeNMdlb0n-jVqgRnAHuahgL54E-EXqabBHXc2S-1Ovodj2HGh1LYrtqSi8vI-Cqw\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":12300,"millis":0.0123,"status":"passed"},"step":{"line":14,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":421600,"millis":0.4216,"status":"passed"},"step":{"line":15,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":1026500,"millis":1.0265,"status":"passed"},"step":{"comments":["# Create a new user"],"line":18,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/register'"}},{"result":{"nanos":747100,"millis":0.7471,"status":"passed"},"step":{"line":19,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":2456300,"millis":2.4563,"status":"passed"},"step":{"line":20,"prefix":"And","index":7,"text":"request { username: #(randomUsername), password: #(password), roles: ['ADMIN'] }"}},{"result":{"nanos":293993800,"millis":293.9938,"status":"passed"},"step":{"line":21,"prefix":"When","index":8,"text":"method POST"},"stepLog":"01:13:35.546 request:\n2 > POST http:\/\/localhost:9091\/api\/admin\/register\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNSwiaWF0IjoxNzQyODY1MjE1fQ.uFjth-A9Hktj_JLk1oJrfALeNMdlb0n-jVqgRnAHuahgL54E-EXqabBHXc2S-1Ovodj2HGh1LYrtqSi8vI-Cqw\n2 > Content-Type: application\/json; charset=UTF-8\n2 > Content-Length: 88\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11742865215376\",\"password\":\"Password123\",\"roles\":[\"ADMIN\"]}\n\n01:13:35.836 response time in milliseconds: 290\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n{\"id\":144,\"username\":\"testuser-karate-11742865215376\",\"password\":\"$2a$10$zAMqN068TF0Jf6Bn.j4B4utOCKqUJ7wZXHVCfqkPDHJeWUyRNpOAu\",\"roles\":[\"ADMIN\"],\"musicCollection\":[]}\n\n"},{"result":{"nanos":12800,"millis":0.0128,"status":"passed"},"step":{"line":22,"prefix":"Then","index":9,"text":"status 200"}},{"result":{"nanos":18619800,"millis":18.6198,"status":"passed"},"step":{"line":23,"prefix":"And","index":10,"text":"match response.id == '#present'"}},{"result":{"nanos":1171200,"millis":1.1712,"status":"passed"},"step":{"line":24,"prefix":"*","index":11,"text":"def userId = response.id"}},{"result":{"nanos":518200,"millis":0.5182,"status":"passed"},"step":{"comments":["# Login as the created user to verify login works"],"line":27,"prefix":"Given","index":12,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":926100,"millis":0.9261,"status":"passed"},"step":{"line":28,"prefix":"And","index":13,"text":"request { username: #(randomUsername), password: #(password) }"}},{"result":{"nanos":140735100,"millis":140.7351,"status":"passed"},"step":{"line":29,"prefix":"When","index":14,"text":"method POST"},"stepLog":"01:13:35.861 request:\n3 > POST http:\/\/localhost:9091\/api\/auth\/login\n3 > Content-Type: application\/json; charset=UTF-8\n3 > Content-Length: 70\n3 > Host: localhost:9091\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n3 > Accept-Encoding: gzip,deflate\n{\"username\":\"testuser-karate-11742865215376\",\"password\":\"Password123\"}\n\n01:13:35.999 response time in milliseconds: 138\n3 < 200\n3 < X-Content-Type-Options: nosniff\n3 < X-XSS-Protection: 1; mode=block\n3 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n3 < Pragma: no-cache\n3 < Expires: 0\n3 < Content-Type: application\/json\n3 < Transfer-Encoding: chunked\n3 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n3 < Keep-Alive: timeout=60\n3 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0ZXN0dXNlci1rYXJhdGUtMTE3NDI4NjUyMTUzNzYiLCJyb2xlcyI6WyJBRE1JTiJdLCJleHAiOjE3NDI4Njg4MTUsImlhdCI6MTc0Mjg2NTIxNX0.OkQRemiC3cPkCUmio0tdZLH1srLHfoNpKSoGxR_7Gd1fGiYCahD_JSQ3vyiZxX_ZdCkKCLblPqDJSCQvLQXf8w\",\"username\":\"testuser-karate-11742865215376\",\"roles\":[\"ADMIN\"]}\n\n"},{"result":{"nanos":11800,"millis":0.0118,"status":"passed"},"step":{"line":30,"prefix":"Then","index":15,"text":"status 200"}},{"result":{"nanos":449700,"millis":0.4497,"status":"passed"},"step":{"line":31,"prefix":"*","index":16,"text":"def userToken = response.jwt"}},{"result":{"nanos":1329000,"millis":1.329,"status":"passed"},"step":{"comments":["# Delete the user"],"line":34,"prefix":"Given","index":17,"text":"url baseUrl + '\/admin\/users\/' + userId"}},{"result":{"nanos":274300,"millis":0.2743,"status":"passed"},"step":{"line":35,"prefix":"And","index":18,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":118930600,"millis":118.9306,"status":"passed"},"step":{"line":36,"prefix":"When","index":19,"text":"method DELETE"},"stepLog":"01:13:36.004 request:\n4 > DELETE http:\/\/localhost:9091\/api\/admin\/users\/144\n4 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNSwiaWF0IjoxNzQyODY1MjE1fQ.uFjth-A9Hktj_JLk1oJrfALeNMdlb0n-jVqgRnAHuahgL54E-EXqabBHXc2S-1Ovodj2HGh1LYrtqSi8vI-Cqw\n4 > Host: localhost:9091\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n4 > Accept-Encoding: gzip,deflate\n\n\n01:13:36.121 response time in milliseconds: 116\n4 < 204\n4 < X-Content-Type-Options: nosniff\n4 < X-XSS-Protection: 1; mode=block\n4 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n4 < Pragma: no-cache\n4 < Expires: 0\n4 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n4 < Keep-Alive: timeout=60\n4 < Connection: keep-alive\n\n\n"},{"result":{"nanos":12100,"millis":0.0121,"status":"passed"},"step":{"line":37,"prefix":"Then","index":20,"text":"status 204"}}],"executorName":"main","line":8,"name":"Create, Update, and Delete User","description":"","durationMillis":755.5417,"startTime":1742865215153,"failed":false,"refId":"[1:8]","endTime":1742865216122,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":395500,"millis":0.3955,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"def baseUrl = 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":2024800,"millis":2.0248,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def randomUsername = 'testuser-karate-1' + java.time.Instant.now().toEpochMilli()"}},{"result":{"nanos":330300,"millis":0.3303,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def password = 'Password123'"}},{"result":{"nanos":197100,"millis":0.1971,"status":"passed"},"step":{"comments":["# Login as admin"],"line":41,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"}},{"result":{"nanos":262100,"millis":0.2621,"status":"passed"},"step":{"line":42,"prefix":"And","index":1,"text":"request { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":128020700,"millis":128.0207,"status":"passed"},"step":{"line":43,"prefix":"When","index":2,"text":"method POST"},"stepLog":"01:13:36.136 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n01:13:36.261 response time in milliseconds: 125\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNiwiaWF0IjoxNzQyODY1MjE2fQ.50BkutTGqDoq5P6wfWkn_JOicvSdSpDqHKgIYZ25mwwkOJ7kSr7zbPFtjiZHAmfF9vC7NpVyur9jrJjNpr2lXQ\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":11600,"millis":0.0116,"status":"passed"},"step":{"line":44,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":437700,"millis":0.4377,"status":"passed"},"step":{"line":45,"prefix":"*","index":4,"text":"def adminToken = response.jwt"}},{"result":{"nanos":808400,"millis":0.8084,"status":"passed"},"step":{"comments":["# Fetch all users"],"line":48,"prefix":"Given","index":5,"text":"url baseUrl + '\/admin\/users'"}},{"result":{"nanos":234900,"millis":0.2349,"status":"passed"},"step":{"line":49,"prefix":"And","index":6,"text":"header Authorization = 'Bearer ' + adminToken"}},{"result":{"nanos":53727700,"millis":53.7277,"status":"passed"},"step":{"line":50,"prefix":"When","index":7,"text":"method GET"},"stepLog":"01:13:36.266 request:\n2 > GET http:\/\/localhost:9091\/api\/admin\/users\n2 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNiwiaWF0IjoxNzQyODY1MjE2fQ.50BkutTGqDoq5P6wfWkn_JOicvSdSpDqHKgIYZ25mwwkOJ7kSr7zbPFtjiZHAmfF9vC7NpVyur9jrJjNpr2lXQ\n2 > Host: localhost:9091\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n2 > Accept-Encoding: gzip,deflate\n\n\n01:13:36.317 response time in milliseconds: 51\n2 < 200\n2 < X-Content-Type-Options: nosniff\n2 < X-XSS-Protection: 1; mode=block\n2 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n2 < Pragma: no-cache\n2 < Expires: 0\n2 < Content-Type: application\/json\n2 < Transfer-Encoding: chunked\n2 < Date: Tue, 25 Mar 2025 01:13:35 GMT\n2 < Keep-Alive: timeout=60\n2 < Connection: keep-alive\n[{\"id\":142,\"username\":\"Admin\",\"password\":\"$2a$10$t8VVB81VwN4KZLyRri8A2.nFf4gKyQ7cWeBfRiSpcW0fEqfljElQW\",\"roles\":[\"SPOTIFY_USER\",\"ADMIN\"],\"musicCollection\":[]},{\"id\":143,\"username\":\"spotify_user\",\"password\":\"$2a$10$3E1jM3f5NUj5zn\/NVfb2COOGlDjQZ4ormZHcrRxEyLWII6QTnmP5K\",\"roles\":[\"SPOTIFY_USER\"],\"musicCollection\":[]}]\n\n"},{"result":{"nanos":10800,"millis":0.0108,"status":"passed"},"step":{"line":51,"prefix":"Then","index":8,"text":"status 200"}},{"result":{"nanos":784200,"millis":0.7842,"status":"passed"},"step":{"line":52,"prefix":"And","index":9,"text":"assert response.length > 0"}}],"executorName":"main","line":39,"name":"Get All Users","description":"","durationMillis":187.2458,"startTime":1742865216130,"failed":false,"refId":"[2:39]","endTime":1742865216319,"exampleIndex":-1}],"callDepth":0,"name":"Create, Update, Delete, and Get Users","description":"","resultDate":"2025-03-25 01:13:36 a.m.","durationMillis":942.7875,"passedCount":2}