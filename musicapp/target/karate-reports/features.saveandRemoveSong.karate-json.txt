{"failedCount":0,"prefixedPath":"classpath:features\/saveAndRemoveSong.feature","packageQualifiedName":"features.saveAndRemoveSong","loopIndex":-1,"relativePath":"features\/saveAndRemoveSong.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":611000,"millis":0.611,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":140937100,"millis":140.9371,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"},"stepLog":"01:13:37.784 << lock released, cached callonce: read('login.feature') { username: 'Admin', password: 'Admin' }\n","callResults":[{"prefixedPath":"classpath:features\/login.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-03-25 01:13:38 a.m.","durationMillis":134.7093,"callArg":{"username":"Admin","password":"Admin"},"failedCount":0,"packageQualifiedName":"features.login","relativePath":"features\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":180100,"millis":0.1801,"status":"passed"},"step":{"comments":["# The parameters 'baseUrl', 'username' and 'password' are passed in from karate-config.js"],"line":5,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"},"stepLog":"01:13:37.645 >> lock acquired, begin callonce: read('login.feature') { username: 'Admin', password: 'Admin' }\n"},{"result":{"nanos":218800,"millis":0.2188,"status":"passed"},"step":{"line":6,"prefix":"And","index":1,"text":"request { username: \"Admin\", password: \"Admin\" }"}},{"result":{"nanos":134047400,"millis":134.0474,"status":"passed"},"step":{"line":7,"prefix":"When","index":2,"text":"method post"},"stepLog":"01:13:37.651 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n01:13:37.783 response time in milliseconds: 132\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 25 Mar 2025 01:13:36 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNywiaWF0IjoxNzQyODY1MjE3fQ.ALSOILBlL12DzCaJHF4FjwREcMF42VXNBEqWUUckZKfh51z9bRcQbZmIImXaUxkfCMZJenAWP_8a9EEw9r14CQ\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":12400,"millis":0.0124,"status":"passed"},"step":{"line":8,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":250600,"millis":0.2506,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def jwt = response.jwt"}}],"executorName":"main","line":3,"name":"Authenticate and get JWT token","description":"","durationMillis":134.7093,"startTime":1742865217649,"failed":false,"refId":"[1:3]","endTime":1742865217784,"exampleIndex":-1}],"name":"User Login","passedCount":1}]},{"result":{"nanos":163700,"millis":0.1637,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":132500,"millis":0.1325,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":321700,"millis":0.3217,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":798100,"millis":0.7981,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":3675500,"millis":3.6755,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":16295000,"millis":16.295,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":1842400,"millis":1.8424,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1602200,"millis":1.6022,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1784400,"millis":1.7844,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":21059200,"millis":21.0592,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":906100,"millis":0.9061,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":385900,"millis":0.3859,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"path 'music\/save'"}},{"result":{"nanos":2774400,"millis":2.7744,"status":"passed"},"step":{"endLine":34,"line":23,"prefix":"And","docString":"{\n  \"spotifyId\": #(randomSpotifyId),\n  \"title\": #(randomTitle),\n  \"artist\": #(randomArtist),\n  \"album\": #(randomAlbum),\n  \"genre\": #(randomGenre),\n  \"durationMs\": #(randomDuration),\n  \"spotifyUrl\": #(randomSpotifyUrl)\n}","index":1,"text":"request"}},{"result":{"nanos":158235700,"millis":158.2357,"status":"passed"},"step":{"line":35,"prefix":"When","index":2,"text":"method POST"},"stepLog":"01:13:37.841 request:\n1 > POST http:\/\/localhost:9091\/api\/music\/save\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNywiaWF0IjoxNzQyODY1MjE3fQ.ALSOILBlL12DzCaJHF4FjwREcMF42VXNBEqWUUckZKfh51z9bRcQbZmIImXaUxkfCMZJenAWP_8a9EEw9r14CQ\n1 > Accept: application\/json\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 247\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"spotifyId\":\"d499c426-15c8-43ef-b5b8-a924f1275059\",\"title\":\"Song-8bfd5\",\"artist\":\"Artist-4df05\",\"album\":\"Album-d5585\",\"genre\":\"Genre-d0652\",\"durationMs\":88404,\"spotifyUrl\":\"https:\\\/\\\/open.spotify.com\\\/track\\\/d499c426-15c8-43ef-b5b8-a924f1275059\"}\n\n01:13:37.994 response time in milliseconds: 153\n1 < 201\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Tue, 25 Mar 2025 01:13:37 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"id\":257,\"spotifyId\":\"d499c426-15c8-43ef-b5b8-a924f1275059\",\"title\":\"Song-8bfd5\",\"artist\":\"Artist-4df05\",\"album\":\"Album-d5585\",\"genre\":\"Genre-d0652\",\"durationMs\":88404,\"spotifyUrl\":\"https:\/\/open.spotify.com\/track\/d499c426-15c8-43ef-b5b8-a924f1275059\",\"users\":[]}\n\n"},{"result":{"nanos":738300,"millis":0.7383,"status":"passed"},"step":{"line":36,"prefix":"Then","index":3,"text":"status 201"}},{"result":{"nanos":769000,"millis":0.769,"status":"passed"},"step":{"line":37,"prefix":"*","index":4,"text":"match response contains { id: '#number' }"}},{"result":{"nanos":716700,"millis":0.7167,"status":"passed"},"step":{"line":38,"prefix":"*","index":5,"text":"def songId = response.id"}},{"result":{"nanos":4061600,"millis":4.0616,"status":"passed"},"step":{"line":39,"prefix":"*","index":6,"text":"def path = java.lang.System.getProperty('user.dir') + '\/target\/song-id.txt'"}},{"result":{"nanos":3973400,"millis":3.9734,"status":"passed"},"step":{"line":40,"prefix":"*","index":7,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":2581900,"millis":2.5819,"status":"passed"},"step":{"line":41,"prefix":"*","index":8,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":11075500,"millis":11.0755,"status":"passed"},"step":{"line":42,"prefix":"*","index":9,"text":"eval Files.writeString(Paths.get(path), songId + '')"}}],"executorName":"main","line":21,"name":"Save a new song","description":"","durationMillis":375.4413,"startTime":1742865217642,"failed":false,"refId":"[1:21]","endTime":1742865218020,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":390700,"millis":0.3907,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":2509500,"millis":2.5095,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":1526300,"millis":1.5263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":828200,"millis":0.8282,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":350900,"millis":0.3509,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":966500,"millis":0.9665,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":1749400,"millis":1.7494,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":2487900,"millis":2.4879,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":1800000,"millis":1.8,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1905800,"millis":1.9058,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1932400,"millis":1.9324,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":247700,"millis":0.2477,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":149600,"millis":0.1496,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":951900,"millis":0.9519,"status":"passed"},"step":{"line":46,"prefix":"*","index":0,"text":"def path = java.lang.System.getProperty('user.dir') + '\/target\/song-id.txt'"}},{"result":{"nanos":233300,"millis":0.2333,"status":"passed"},"step":{"line":47,"prefix":"*","index":1,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":172200,"millis":0.1722,"status":"passed"},"step":{"line":48,"prefix":"*","index":2,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":1882200,"millis":1.8822,"status":"passed"},"step":{"line":49,"prefix":"*","index":3,"text":"def songId = Files.readString(Paths.get(path))"}},{"result":{"nanos":1173700,"millis":1.1737,"status":"passed"},"step":{"line":51,"prefix":"Given","index":4,"text":"path 'music\/remove\/' + songId"}},{"result":{"nanos":58832100,"millis":58.8321,"status":"passed"},"step":{"line":52,"prefix":"When","index":5,"text":"method DELETE"},"stepLog":"01:13:38.053 request:\n1 > DELETE http:\/\/localhost:9091\/api\/music\/remove\/257\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNywiaWF0IjoxNzQyODY1MjE3fQ.ALSOILBlL12DzCaJHF4FjwREcMF42VXNBEqWUUckZKfh51z9bRcQbZmIImXaUxkfCMZJenAWP_8a9EEw9r14CQ\n1 > Accept: application\/json\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n01:13:38.109 response time in milliseconds: 56\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Content-Length: 34\n1 < Date: Tue, 25 Mar 2025 01:13:37 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\nSong removed from your collection.\n\n"},{"result":{"nanos":21100,"millis":0.0211,"status":"passed"},"step":{"line":53,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":727600,"millis":0.7276,"status":"passed"},"step":{"line":54,"prefix":"And","index":7,"text":"match response == 'Song removed from your collection.'"}}],"executorName":"main","line":45,"name":"Remove the saved song from user collection","description":"","durationMillis":80.839,"startTime":1742865218026,"failed":false,"refId":"[2:45]","endTime":1742865218111,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":74300,"millis":0.0743,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":1441700,"millis":1.4417,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":152300,"millis":0.1523,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":122800,"millis":0.1228,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":51300,"millis":0.0513,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":137800,"millis":0.1378,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":1034400,"millis":1.0344,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":994000,"millis":0.994,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":974900,"millis":0.9749,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1125300,"millis":1.1253,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1873700,"millis":1.8737,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":258500,"millis":0.2585,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":167600,"millis":0.1676,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":407800,"millis":0.4078,"status":"passed"},"step":{"line":58,"prefix":"*","index":0,"text":"def path = 'target\/song-id.txt'"}},{"result":{"nanos":1578000,"millis":1.578,"status":"passed"},"step":{"line":59,"prefix":"*","index":1,"text":"def songId = Java.type('java.nio.file.Files').readString(Java.type('java.nio.file.Paths').get(path))"}},{"result":{"nanos":585100,"millis":0.5851,"status":"passed"},"step":{"line":61,"prefix":"Given","index":2,"text":"path 'music\/' + songId"}},{"result":{"nanos":53894000,"millis":53.894,"status":"passed"},"step":{"line":62,"prefix":"When","index":3,"text":"method DELETE"},"stepLog":"01:13:38.129 request:\n1 > DELETE http:\/\/localhost:9091\/api\/music\/257\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0Mjg2ODgxNywiaWF0IjoxNzQyODY1MjE3fQ.ALSOILBlL12DzCaJHF4FjwREcMF42VXNBEqWUUckZKfh51z9bRcQbZmIImXaUxkfCMZJenAWP_8a9EEw9r14CQ\n1 > Accept: application\/json\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n01:13:38.181 response time in milliseconds: 52\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Content-Length: 26\n1 < Date: Tue, 25 Mar 2025 01:13:37 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\nSong deleted successfully.\n\n"},{"result":{"nanos":7500,"millis":0.0075,"status":"passed"},"step":{"line":63,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":5541600,"millis":5.5416,"status":"passed"},"step":{"line":64,"prefix":"And","index":5,"text":"match response == 'Song deleted successfully.'"}}],"executorName":"main","line":57,"name":"Admin deletes the song","description":"","durationMillis":70.4226,"startTime":1742865218116,"failed":false,"refId":"[3:57]","endTime":1742865218188,"exampleIndex":-1}],"callDepth":0,"name":"Save and Remove Song","description":"","resultDate":"2025-03-25 01:13:38 a.m.","durationMillis":526.7029,"passedCount":3}