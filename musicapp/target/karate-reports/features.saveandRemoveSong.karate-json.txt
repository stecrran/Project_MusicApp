{"failedCount":0,"prefixedPath":"classpath:features\/saveAndRemoveSong.feature","packageQualifiedName":"features.saveAndRemoveSong","loopIndex":-1,"relativePath":"features\/saveAndRemoveSong.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":421800,"millis":0.4218,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":141151500,"millis":141.1515,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"},"stepLog":"03:27:50.919 << lock released, cached callonce: read('login.feature') { username: 'Admin', password: 'Admin' }\n","callResults":[{"prefixedPath":"classpath:features\/login.feature","loopIndex":-1,"callDepth":1,"description":"","resultDate":"2025-03-21 03:27:51 a.m.","durationMillis":134.992,"callArg":{"username":"Admin","password":"Admin"},"failedCount":0,"packageQualifiedName":"features.login","relativePath":"features\/login.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":175600,"millis":0.1756,"status":"passed"},"step":{"comments":["# The parameters 'baseUrl', 'username' and 'password' are passed in from karate-config.js"],"line":5,"prefix":"Given","index":0,"text":"url baseUrl + '\/auth\/login'"},"stepLog":"03:27:50.779 >> lock acquired, begin callonce: read('login.feature') { username: 'Admin', password: 'Admin' }\n"},{"result":{"nanos":763000,"millis":0.763,"status":"passed"},"step":{"line":6,"prefix":"And","index":1,"text":"request { username: \"Admin\", password: \"Admin\" }"}},{"result":{"nanos":133763600,"millis":133.7636,"status":"passed"},"step":{"line":7,"prefix":"When","index":2,"text":"method post"},"stepLog":"03:27:50.786 request:\n1 > POST http:\/\/localhost:9091\/api\/auth\/login\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 39\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"username\":\"Admin\",\"password\":\"Admin\"}\n\n03:27:50.917 response time in milliseconds: 131\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Fri, 21 Mar 2025 03:27:50 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"jwt\":\"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjUzMTI3MCwiaWF0IjoxNzQyNTI3NjcwfQ.6TGUb0XgVWhtZSq34jAQkv6-iKdwSt8fevN0n21jRiemwUor_Ixsj3RWnVX9KGusVm8gzfJFYIY_dD_-iT4QUw\",\"username\":\"Admin\",\"roles\":[\"ADMIN\",\"SPOTIFY_USER\"]}\n\n"},{"result":{"nanos":10000,"millis":0.01,"status":"passed"},"step":{"line":8,"prefix":"Then","index":3,"text":"status 200"}},{"result":{"nanos":279800,"millis":0.2798,"status":"passed"},"step":{"line":9,"prefix":"*","index":4,"text":"def jwt = response.jwt"}}],"executorName":"main","line":3,"name":"Authenticate and get JWT token","description":"","durationMillis":134.992,"startTime":1742527670783,"failed":false,"refId":"[1:3]","endTime":1742527670919,"exampleIndex":-1}],"name":"User Login","passedCount":1}]},{"result":{"nanos":263000,"millis":0.263,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":218900,"millis":0.2189,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":493000,"millis":0.493,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":1055400,"millis":1.0554,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":6768300,"millis":6.7683,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":9489400,"millis":9.4894,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":1943700,"millis":1.9437,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1720200,"millis":1.7202,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1943200,"millis":1.9432,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":8882900,"millis":8.8829,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":713900,"millis":0.7139,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":337300,"millis":0.3373,"status":"passed"},"step":{"line":22,"prefix":"Given","index":0,"text":"path 'music\/save'"}},{"result":{"nanos":3486800,"millis":3.4868,"status":"passed"},"step":{"endLine":34,"line":23,"prefix":"And","docString":"{\n  \"spotifyId\": #(randomSpotifyId),\n  \"title\": #(randomTitle),\n  \"artist\": #(randomArtist),\n  \"album\": #(randomAlbum),\n  \"genre\": #(randomGenre),\n  \"durationMs\": #(randomDuration),\n  \"spotifyUrl\": #(randomSpotifyUrl)\n}","index":1,"text":"request"}},{"result":{"nanos":153923400,"millis":153.9234,"status":"passed"},"step":{"line":35,"prefix":"When","index":2,"text":"method POST"},"stepLog":"03:27:50.960 request:\n1 > POST http:\/\/localhost:9091\/api\/music\/save\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjUzMTI3MCwiaWF0IjoxNzQyNTI3NjcwfQ.6TGUb0XgVWhtZSq34jAQkv6-iKdwSt8fevN0n21jRiemwUor_Ixsj3RWnVX9KGusVm8gzfJFYIY_dD_-iT4QUw\n1 > Accept: application\/json\n1 > Content-Type: application\/json; charset=UTF-8\n1 > Content-Length: 248\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n{\"spotifyId\":\"072461d1-4f8a-4d26-9ee9-d6cec24138d7\",\"title\":\"Song-3b268\",\"artist\":\"Artist-5eeab\",\"album\":\"Album-447f3\",\"genre\":\"Genre-38b8d\",\"durationMs\":119721,\"spotifyUrl\":\"https:\\\/\\\/open.spotify.com\\\/track\\\/072461d1-4f8a-4d26-9ee9-d6cec24138d7\"}\n\n03:27:51.110 response time in milliseconds: 150\n1 < 201\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Transfer-Encoding: chunked\n1 < Date: Fri, 21 Mar 2025 03:27:50 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\n{\"id\":249,\"spotifyId\":\"072461d1-4f8a-4d26-9ee9-d6cec24138d7\",\"title\":\"Song-3b268\",\"artist\":\"Artist-5eeab\",\"album\":\"Album-447f3\",\"genre\":\"Genre-38b8d\",\"durationMs\":119721,\"spotifyUrl\":\"https:\/\/open.spotify.com\/track\/072461d1-4f8a-4d26-9ee9-d6cec24138d7\",\"users\":[]}\n\n"},{"result":{"nanos":10500,"millis":0.0105,"status":"passed"},"step":{"line":36,"prefix":"Then","index":3,"text":"status 201"}},{"result":{"nanos":898300,"millis":0.8983,"status":"passed"},"step":{"line":37,"prefix":"*","index":4,"text":"match response contains { id: '#number' }"}},{"result":{"nanos":731300,"millis":0.7313,"status":"passed"},"step":{"line":38,"prefix":"*","index":5,"text":"def songId = response.id"}},{"result":{"nanos":5267100,"millis":5.2671,"status":"passed"},"step":{"line":39,"prefix":"*","index":6,"text":"def path = java.lang.System.getProperty('user.dir') + '\/target\/song-id.txt'"}},{"result":{"nanos":3100000,"millis":3.1,"status":"passed"},"step":{"line":40,"prefix":"*","index":7,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":774600,"millis":0.7746,"status":"passed"},"step":{"line":41,"prefix":"*","index":8,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":7223000,"millis":7.223,"status":"passed"},"step":{"line":42,"prefix":"*","index":9,"text":"eval Files.writeString(Paths.get(path), songId + '')"}}],"executorName":"main","line":21,"name":"Save a new song","description":"","durationMillis":350.8175,"startTime":1742527670776,"failed":false,"refId":"[1:21]","endTime":1742527671130,"exampleIndex":-1},{"sectionIndex":1,"stepResults":[{"result":{"nanos":128800,"millis":0.1288,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":1310900,"millis":1.3109,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":200600,"millis":0.2006,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":289100,"millis":0.2891,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":177900,"millis":0.1779,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":200400,"millis":0.2004,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":1503000,"millis":1.503,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":1349600,"millis":1.3496,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":1297300,"millis":1.2973,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1222100,"millis":1.2221,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1144900,"millis":1.1449,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":225300,"millis":0.2253,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":143400,"millis":0.1434,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":1086800,"millis":1.0868,"status":"passed"},"step":{"line":46,"prefix":"*","index":0,"text":"def path = java.lang.System.getProperty('user.dir') + '\/target\/song-id.txt'"}},{"result":{"nanos":209900,"millis":0.2099,"status":"passed"},"step":{"line":47,"prefix":"*","index":1,"text":"def Files = Java.type('java.nio.file.Files')"}},{"result":{"nanos":157700,"millis":0.1577,"status":"passed"},"step":{"line":48,"prefix":"*","index":2,"text":"def Paths = Java.type('java.nio.file.Paths')"}},{"result":{"nanos":2035300,"millis":2.0353,"status":"passed"},"step":{"line":49,"prefix":"*","index":3,"text":"def songId = Files.readString(Paths.get(path))"}},{"result":{"nanos":517900,"millis":0.5179,"status":"passed"},"step":{"line":51,"prefix":"Given","index":4,"text":"path 'music\/remove\/' + songId"}},{"result":{"nanos":73630800,"millis":73.6308,"status":"passed"},"step":{"line":52,"prefix":"When","index":5,"text":"method DELETE"},"stepLog":"03:27:51.153 request:\n1 > DELETE http:\/\/localhost:9091\/api\/music\/remove\/249\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjUzMTI3MCwiaWF0IjoxNzQyNTI3NjcwfQ.6TGUb0XgVWhtZSq34jAQkv6-iKdwSt8fevN0n21jRiemwUor_Ixsj3RWnVX9KGusVm8gzfJFYIY_dD_-iT4QUw\n1 > Accept: application\/json\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n03:27:51.224 response time in milliseconds: 70\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Content-Length: 34\n1 < Date: Fri, 21 Mar 2025 03:27:50 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\nSong removed from your collection.\n\n"},{"result":{"nanos":8800,"millis":0.0088,"status":"passed"},"step":{"line":53,"prefix":"Then","index":6,"text":"status 200"}},{"result":{"nanos":642900,"millis":0.6429,"status":"passed"},"step":{"line":54,"prefix":"And","index":7,"text":"match response == 'Song removed from your collection.'"}}],"executorName":"main","line":45,"name":"Remove the saved song from user collection","description":"","durationMillis":87.4834,"startTime":1742527671136,"failed":false,"refId":"[2:45]","endTime":1742527671226,"exampleIndex":-1},{"sectionIndex":2,"stepResults":[{"result":{"nanos":86600,"millis":0.0866,"status":"passed"},"step":{"background":true,"line":4,"prefix":"*","index":0,"text":"url 'http:\/\/localhost:9091\/api'"}},{"result":{"nanos":1338900,"millis":1.3389,"status":"passed"},"step":{"background":true,"line":5,"prefix":"*","index":1,"text":"def loginResponse = callonce read('login.feature') { username: 'Admin', password: 'Admin' }"}},{"result":{"nanos":253500,"millis":0.2535,"status":"passed"},"step":{"background":true,"line":6,"prefix":"*","index":2,"text":"def token = loginResponse.jwt"}},{"result":{"nanos":440500,"millis":0.4405,"status":"passed"},"step":{"background":true,"line":7,"prefix":"*","index":3,"text":"header Authorization = 'Bearer ' + token"}},{"result":{"nanos":157500,"millis":0.1575,"status":"passed"},"step":{"background":true,"line":8,"prefix":"*","index":4,"text":"header Accept = 'application\/json'"}},{"result":{"nanos":169300,"millis":0.1693,"status":"passed"},"step":{"comments":["# Generate random song details"],"background":true,"line":11,"prefix":"*","index":5,"text":"def uuid = function() { return java.util.UUID.randomUUID().toString() }"}},{"result":{"nanos":1271900,"millis":1.2719,"status":"passed"},"step":{"background":true,"line":12,"prefix":"*","index":6,"text":"def randomSpotifyId = uuid()"}},{"result":{"nanos":1038900,"millis":1.0389,"status":"passed"},"step":{"background":true,"line":13,"prefix":"*","index":7,"text":"def randomTitle = 'Song-' + uuid().substring(0, 5)"}},{"result":{"nanos":1013900,"millis":1.0139,"status":"passed"},"step":{"background":true,"line":14,"prefix":"*","index":8,"text":"def randomArtist = 'Artist-' + uuid().substring(0, 5)"}},{"result":{"nanos":1077100,"millis":1.0771,"status":"passed"},"step":{"background":true,"line":15,"prefix":"*","index":9,"text":"def randomAlbum = 'Album-' + uuid().substring(0, 5)"}},{"result":{"nanos":1013000,"millis":1.013,"status":"passed"},"step":{"background":true,"line":16,"prefix":"*","index":10,"text":"def randomGenre = 'Genre-' + uuid().substring(0, 5)"}},{"result":{"nanos":208800,"millis":0.2088,"status":"passed"},"step":{"background":true,"line":17,"prefix":"*","index":11,"text":"def randomDuration = (Math.floor(Math.random() * (300000 - 60000)) + 60000)"}},{"result":{"nanos":135200,"millis":0.1352,"status":"passed"},"step":{"background":true,"line":18,"prefix":"*","index":12,"text":"def randomSpotifyUrl = 'https:\/\/open.spotify.com\/track\/' + randomSpotifyId"}},{"result":{"nanos":373100,"millis":0.3731,"status":"passed"},"step":{"line":58,"prefix":"*","index":0,"text":"def path = 'target\/song-id.txt'"}},{"result":{"nanos":2827900,"millis":2.8279,"status":"passed"},"step":{"line":59,"prefix":"*","index":1,"text":"def songId = Java.type('java.nio.file.Files').readString(Java.type('java.nio.file.Paths').get(path))"}},{"result":{"nanos":542500,"millis":0.5425,"status":"passed"},"step":{"line":61,"prefix":"Given","index":2,"text":"path 'music\/' + songId"}},{"result":{"nanos":54410300,"millis":54.4103,"status":"passed"},"step":{"line":62,"prefix":"When","index":3,"text":"method DELETE"},"stepLog":"03:27:51.247 request:\n1 > DELETE http:\/\/localhost:9091\/api\/music\/249\n1 > Authorization: Bearer eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJBZG1pbiIsInJvbGVzIjpbIkFETUlOIiwiU1BPVElGWV9VU0VSIl0sImV4cCI6MTc0MjUzMTI3MCwiaWF0IjoxNzQyNTI3NjcwfQ.6TGUb0XgVWhtZSq34jAQkv6-iKdwSt8fevN0n21jRiemwUor_Ixsj3RWnVX9KGusVm8gzfJFYIY_dD_-iT4QUw\n1 > Accept: application\/json\n1 > Host: localhost:9091\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.14 (Java\/17.0.12)\n1 > Accept-Encoding: gzip,deflate\n\n\n03:27:51.300 response time in milliseconds: 52\n1 < 200\n1 < X-Content-Type-Options: nosniff\n1 < X-XSS-Protection: 1; mode=block\n1 < Cache-Control: no-cache, no-store, max-age=0, must-revalidate\n1 < Pragma: no-cache\n1 < Expires: 0\n1 < Content-Type: application\/json\n1 < Content-Length: 26\n1 < Date: Fri, 21 Mar 2025 03:27:50 GMT\n1 < Keep-Alive: timeout=60\n1 < Connection: keep-alive\nSong deleted successfully.\n\n"},{"result":{"nanos":9700,"millis":0.0097,"status":"passed"},"step":{"line":63,"prefix":"Then","index":4,"text":"status 200"}},{"result":{"nanos":694500,"millis":0.6945,"status":"passed"},"step":{"line":64,"prefix":"And","index":5,"text":"match response == 'Song deleted successfully.'"}}],"executorName":"main","line":57,"name":"Admin deletes the song","description":"","durationMillis":67.0631,"startTime":1742527671232,"failed":false,"refId":"[3:57]","endTime":1742527671301,"exampleIndex":-1}],"callDepth":0,"name":"Save and Remove Song","description":"","resultDate":"2025-03-21 03:27:51 a.m.","durationMillis":505.364,"passedCount":3}